\documentclass[12pt]{article}%
\input{prefix}%



\begin{document}
	
\title{Fault-Tolerant and Local Spanners Revisited} \author{%
   Stav Ashur%
   \StavThanks{}%
   \and%
   Sariel Har-Peled%
   \SarielThanks{Work on this paper was partially supported by a NSF
      AF award CCF-1907400.  }%
}%
	
\maketitle

\renewcommand{\G}{\Mh{G}}%
\newcommand{\PS}{\Mh{P}}%
\newcommand{\EG}{\Mh{E}}%
\newcommand{\EGX}[1]{\Mh{E}\pth{#1}}%
\newcommand{\region}{\Mh{\mathcalb{r}}}%
\newcommand{\gminus}{-}%
\newcommand{\interiorX}[1]{\mathrm{int}\pth{#1}}%
\newcommand{\restrictY}[2]{#1 \cap {#2}}

\section{Introduction}

\paragraph{Euclidean graph and spanners.}
For a set $\PS$ of points in $\Re^d$, an \emphw{Euclidean graph}
$\G = (\PS, \EG)$ is an undirected graph with $\PS$ as the set of
vertices. An edge $\pa \pb \in \EG$ is naturally associated with the
segment $\pa\pb$, and weight of the edge is the (Euclidean) length of
the segment.  Consider a pair of points $\pa,\pb \in \PS$. For a
parameter $t \geq 1$, a path between $\pa$ and $\pb$ in $\G$ is a
\emphw{$t$-path} if the length of the path is at most
$t \dY{\pa}{\pb}$, where $\dY{\pa}{\pb}$ is the Euclidean distance
between $\pa$ and $\pb$.  The graph $\G$ is a \emphw{$t$-spanner} of
$\PS$ if there is a $t$-path between any pair of points
$\pa,\pb\in \PS$.  Throughout the paper, $n$ denotes the cardinality
of the point set $\PS$, unless stated otherwise. We denote the length
of the shortest path between $\pa,\pb\in \PS$ in the graph $\G$ by
$\dGY{\pa}{\pb}$.

\paragraph{Residual graphs.}

Let $\FF$ be a family of regions in the plane. For a fault region
$\region \in \FF$ and a geometric graph $\G$ on a point set $\PS$, let
$\G \gminus \region$ be the residual graph after removing from it all
the points of $\PS$ in $\region$. and all the edges that intersects
$\region$.  Formally, let
\begin{equation*}
    \G \gminus \region%
    =%
    \bigl( \PS \setminus \region, \Set{ uv \in \EG }{ uv \cap
       \interiorX{\region} = \emptyset} \bigr),
\end{equation*}
where $\interiorX{\region}$ denotes the interior of
$\region$. Similarly, let
\begin{equation*}
    \restrictY{\G}{\region}%
    =%
    \bigl( \PS \cap \interiorX{\region},
    \Set{uv \in \EG}{ uv \subseteq \interiorX{\region} } \bigr).
\end{equation*}
be the residual graph after restricting $\G$ to the region $\region$.

\paragraph{Fault-tolerant and local spanners.}

A \emphw{fault-tolerant spanner} for $\FF$, is a graph $\G$, such that
for any region $\region$ (i.e., the ``attack''), the graph
$\G \gminus \region$ is a $t$-spanner for all its
vertices. Surprisingly, as shown by Abam \etal \cite{abfg-rftgs-09},
such fault-tolerant spanners can be constructed where the attack
region is any convex set. Furthermore, these spanners have near linear
number of edges.

In the same spirit, a graph $\G$ is a \emphw{local spanner} for $\FF$,
if for any region $\region \in \FF$, we have that
$\restrictY{\G}{\region}$ is a $t$-spanner for all its vertices.  The
notion of local-spanner was defined by Abam and Borouny
\cite{ab-lgs-21}. They showed how to construct such spanners for
axis-parallel squares and vertical slabs. They also showed how to
construct such spanners for disks, if one is allowed to add Steiner
points. Abam and Borouny left the question of how to construct local
spanners for disks as an open problem.

\subsection*{Our results}

We present a new construction of spanners, which surprisingly, is not
only fault-tolerant for convex regions, but it also a local spanner
for disks. This resolves the aforementioned open problem from Abam and
Borouny \cite{ab-lgs-21}. Our construction is a variant of the
original construction of Abam \etal \cite{abfg-rftgs-09}.

We then investigate various other constructions of local spanners,
where one is allowed to slightly shrink the region.
	

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Complement of disk faults / disk local spanners}
	
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
\section{Convex faults / disk local spanners}

Let $\FF$ be the set of convex regions, and $\eps>0$. We use the
construction of Abam \etal \cite{abfg-rftgs-09} in order to create a
$(1+\eps)$-$\FF$ tolerant spanner. In their paper, Abam \etal build a
\emph{semi separated pair decomposition} (SSPD), and add a set of
carefully chosen edges between every two sets $A,B\subseteq P$ that
compose a pair in the SSPD. Given a pair $(A,B)$, the algorithm
partitions the larger set, w.l.o.g it is $B$, by shooting rays at
fixed angular intervals from a disk that contains $A$, and then adds a
planar set of edges $E_i$ between the convex hulls of $A$ and every
part $B$ of $B$, that has the following property:

For any half-plane $H$ such that $A\cap H\neq \emptyset$ and
$B\cap H\neq \emptyset$, there exists an edge $e\in E_i$ such that
$e\subseteq H$. This property, together with the properties of the
SSPD, makes the resulted graph an $\FF$-fault tolerant spanner.

We notice, that a similar construction that chooses $E_i$ to be the
edges of the Delaunay triangulation with one end in $A$ and the other
in $B$ has the same property. We now prove that for any disk
$d\subseteq \Re^2$, and for any set $P'$ of points we have that
$\DT(P')\mid_d$ is connected. This is enough as half-planes can be
simulated by complements of disks.

\begin{claim}
    For a set of points $P\subseteq \Re^2$ and for any disk $d$,
    $\DT(P)\mid_d$ is connected.
\end{claim}

\begin{proof}
    We prove a different claim that immediately implies the desired
    one. Let $d$ be a disk with two points $p,q\in P$ on its
    boundary. Then there is a path between $p$ and $q$ in
    $\DT(P)\mid_d$. This is enough as for every two points $p,q$ and a
    disk $d$ containing them, we can get a disk $d'$ that contains $p$
    and $q$ on it's boundary by moving the center of $d$ in an
    arbitrary direction until either of them, say $p$ is on the
    boundary, and them moving the center of the disk towards $p$ while
    shrinking the size of the disk to maintain $p$ on the boundary,
    until $q$ as well is on the boundary.
    
    We prove by induction over the number points in the interior of
    $d$.
    
    $|d\cap (P\setminus \partial d)| = 0$: Then by construction of the Delaunay triangulation the edge $\{p,q\}$ is in $\DT(P)$ and is contained in the interior of $D$.\\
    
    $|d\cap (P\setminus \partial d)| > 0$: Let $x\in P$ be a point in
    the interior of $d$. We move the center of $d$ in the direction of
    $p$, shrinking $d$ in the process, until we get a disk
    $d'\subseteq d$ such that $x$ is on the boundary of $d'$. By
    induction there is a path between $p$ and $x$ in $\DT\mid_{d'}$,
    and since $\DT\mid_{d'}\subseteq \DT\mid_{d}$ we have that the
    same path exists in $\DT\mid_{d}$. The same proof gives us a path
    between $x$ and $q$ and thus we are done.
    
\end{proof}

Since the triangulation is planar, all of the arguments from the
original paper regarding the size of the spanner hold, and we get a
$(1+\eps)-\FF$ fault tolerant spanner of size $O(\eps^{-3}n\log n)$ in
$O(\eps^{-2}n\log n)$ time.

\section{Complement of convex faults / convex local spanners}
Using the same argument, we can extend the result for the case where
$\LL$ is the set of all scaled and translated copies, homothets, of a
convex shape $\CC$. While the Delaunay triangulation is not well
defined for all convex shapes, the operation of creating edges between
two points $p,q\in P$ such that there exist a homothet of $\CC$ that
contains only $p$ and $q$ and no other point of $\PS$ is always well
defined, and gives us a graph known as the $\CC$-Delaunay graph of
$\PS$, and denoted $\DG_{\CC}(P)$. The above proof applies almost
verbatim for any convex $\CC$, and proves the connectivity of
$\DG_{\CC}(P)$ for any $L\in \LL$.

We need only to define a suitable shrinking operation for convex
region towards a point, which is possible, for example, by
parameterizing the curve defining the region and leaving the desired
point in the same coordinate of the smaller curve. So, we get a
$(1+\eps)-\LL$ local spanner of size $O(\eps^{-3}n\log n)$ in
$O(\eps^{-2}n\log n)$ time.(

%	TODO: this is actually not true unless we know how to build
% \DG_{\C}(P)

%	Since the Delaunay triangulation is well defined for the
% \emph{polygonal convex distance} (L.P. Chew and
% R.L. Drydale. Voronoi diagrams based on convex distance functions.In
% 1st SoCG, pages 234â€“244, ACM Press, 1985), we can use the exact same
% proof (again replacing only the distance function and the disk) to
% get an algorithm for this entire family of problems.

\section{$\eps$-shadow}

In this section we consider a weaker form of fault tolerance. Given a
family $\LL$ of shapes, we say that $\G$ is a $(\LL,\eps)$-local
spanner if for any $L\in\LL$ we have that $G\mid_{L_{\eps}}$, where
$L_{\eps}$ is $L$ rescaled by $(1-\eps)$, is a $t$-spanner. We call
$L\setminus L_{\eps}$ the \emph{shadow} of $L$, and we say that a
point $p$ is \emph{truly contained} in $L$ w.r.t. $\eps$, and denote
$p\in_{\eps} L$, if $p\in L_{\eps}$.

\subsection{Bounded aspect ratio rectangles}
Let $\LL$ be the set of axis parallel rectangles with aspect ratio at
most $1<\alpha$. We repeatedly preform the algorithm for convex local
spanners with rectangles of different aspect-ratio, where in the
$i$\th iteration we use a rectangle with aspect ratio
$\left(1+\eps\right)^i$, where $i\in\{0,...,\log_{1+\eps}(\alpha)\}$.

Let $r$ be a rectangle with aspect ratio $\alpha$, and let $(A,B)$ be
a pair in an SSPD such that $A\cap r\neq \emptyset$, and
$B\cap r\neq \emptyset$. We assume w.l.o.g that the height of $r$ is
1, and its width is $\alpha'\in [1,\alpha]$.

Let $i\in \{0,...,\log_{1+\eps}(\alpha)\}$ be an index for which
$\alpha' \leq (1+\eps)^i \leq \frac{\alpha}{1-\eps}$ if such an index
exists, then let $r'$ be the rectangle with width $\alpha'$ and aspect
ratio $(1+\eps)^i$, whose horizontal bisector coincides with that of
$r$. Since $(1+\eps)^i \leq \frac{\alpha}{1-\eps}$, we have that
$r\setminus r'$ is contained within the shadow of $r$, and therefore
$r'$ contains points of both $A$ and $B$, from the correctness of the
convex local spanner, we will have an edge between a point in
$A\cap r'$ and a point in $B\cap r'$. As before, this, together with
the properties of the SSPD, is enough to guarantee that the
constructed graph is indeed a $(\LL, \eps)$-$t$-spanner (for the
appropriate choice of the parameter $s$ of the SSPD).

We are left with proving that there exists an index
$i\in \{0,...,\log_{1+\eps}(\alpha)\}$ for which
$\alpha' \leq (1+\eps)^i \leq \frac{\alpha}{1-\eps}$.

$$\alpha' \leq (1+\eps)^i \leq \frac{\alpha}{1-\eps}$$

$$\log_{1+\eps}(\alpha') \leq i \leq \log_{1+\eps}\left(\frac{\alpha}{1-\eps}\right)$$

$$\log_{1+\eps}(\alpha') \leq i \leq \log_{1+\eps}(\alpha) - \log_{1+\eps}(1-\eps)$$

If $\log_{1+\eps}(1-\eps)<-1$, then there must be an integer $i$ with
the required properties. We now notice that
$(1+\eps)^{-1}=\frac{1}{1+\eps}>(1-\eps)$ [since
$1>(1-\eps)(1+\eps)=(1-\eps^2)$], and so $i$ exists.

The size of the spanner is $\log_{1+\eps}(\alpha)$ times the number of
edges in a convex local spanner, and since
$\log_{1+\eps}(\alpha)=O\left(\frac{\log(\alpha)}{\eps}\right)$, we
have a spanner of size
$O\left(\frac{\log(\alpha)}{\eps (t-1)^{-3}}n\log n\right)$


\subsection{Arbitrary rectangles}

In order to construct local spanners for the family $\LL$ of axis
parallel rectangles with $\eps$-shadow, we describe a decomposition of
the point set $P\subseteq \Re^2$ in to pairs of sets, a decomposition
which we name a Quadrant Separated Pair Decomposition (\QSPD). This
decomposition gives us $O(n\log^2n)$ pairs $(A_i,B_i)$ of subsets of
$\PS$, such that the sets can be separated by a vertical line and also
by a horizontal line, and for every two points $p,q\in P$, there
exists a single pair $(A_i,B_i)$ such that (w.l.o.g) $p\in A_i$,
$q\in B_i$. This separation can be viewed as if on of the sets lies in
the first quadrant of the plane (i.e. every point has positive $x$ and
$y$ values), and the other is in the third quadrant (i.e. every point
has negative $x$ and $y$ values), hence the name.

The construction of the decomposition can be described as the repeated
recursive invocation of two fairly simple subroutines denoted $S_1$
and $S_2$. The first subroutine $S_1$ goes as follows. Given a set of
points $\PS$, and a horizontal line $l_y$, find the median of $\PS$
w.r.t. the $x$-coordinates of the points, and create the vertical line
$l_x$ passing through it. $l_x$ and $l_y$ now divide the plane into 4
quadrants, add both pairs of diagonally opposing quadrants to the
decomposition, and recurse twice, once on the points to the left of
$l_x$, and once on the points to its right.

The second operation is now even easier to describe. Find the median
of $\PS$ w.r.t. the $y$-coordinates of the points, create the
horizontal line $l_y$ passing through that point, call $S_1(P,l_y)$,
and recurse twice, once on the points to below of $l_y$, and once on
the points above it.

\begin{claim}
    The subroutine $S_2(P)$ creates a \QSPD with size $O(n\log^2n)$.
\end{claim}

\begin{proof}
    By construction, each reported pair is separated w.r.t. to both
    dimensions, and any two point appear in diagonally opposing
    quadrants exactly once, as every recursive calls to both $S_1$ and
    $S_2$ will include only one of the points.
    
    Every call to $S_1$ creates two pairs, and generates two recursive
    calls, each with exactly half of the points. The formula for the
    size of the pairs created by $S_1$ is therefore
    $T(n)=2T\left( \frac{n}{2}\right) + O(n)$, which solves to
    $O(n)$. Very similarly, each call to $S_2$ calls $S_1$ once, and
    generates two recursive calls, each with exactly half of the
    points. The total number of pairs is therefore
    $S(n)=2S\left( \frac{n}{2}\right) + O(n\log n)$, which solves to
    $O(n\log^2n)$.
    
\end{proof}






We first describe a subroutine for connecting two sets of points, $A$
and $B$, where $A$ is contained in $Q^-$, the negative quadrant of the
plane (i.e., have a negative value $x$-coordinate and a negative value
$y$-coordinate), and $B$ is contained in $Q^+$, the positive quadrant
of the plane.

Our algorithm will connect every point in $A$ to
$O\left(\frac{1}{\eps^2}\right)$ points in the positive quadrant, and
after performing the same process for the points of the symmetrically
defined $B'$, we will have that every rectangle that truly contains
points from $A$ and $B$ will have an edge $(a,b)$ with $a\in A$ and
$b\in B$.

For every point $a = (x',y') \in A$ we define partition the positive
quadrant into $O\left(\frac{1}{\eps^2}\right)$ sets. We consider the
following $\frac{1}{\eps}$ horizontal stripes -
$\forall j\in \{1,...,\frac{1}{\eps}\}$:

$$H_{j}:=\{(x,y)~|~  0 \leq x \leq x'+y'  ,~ (j-1)\cdot \eps y' < y \leq j\cdot \eps y'\}$$

On top of these we add similarly built vertical stripes:

$$V_{i}:=\{(x,y)~|~ (j-1)\cdot \eps x' < x \leq j\cdot \eps x',~ 0 \leq y \leq x'+y' \}$$

These stripes create a grid which partitions the rectangle $r$ whose
opposite corners are $(0,0)$ and $(|x'|,|y'|)$ into $\frac{1}{\eps^2}$
cells of width $\eps x$ and height $\eps y$. Formally:

$$C_{i,j}:=\{(x',y')~|~  (i-1)\cdot \eps x < x' \leq i\cdot \eps x,~ (j-1)\cdot \eps y< y' \leq j\cdot \eps y\}$$

We now divide the parts of the stripes that lie outside of the
rectangle $r$. The horizontal stripes are divided into cells of width
$\eps(x+y)$ and height $\eps y$, and the vertical stripes are divided
into cells of width $\eps y$and height $\eps(x+y)$. The extremal cell
in each stripe may be smaller if $x$ or $y$ are not divisible by
$\eps(x+y)$. Formally:

$$C_{H_{i,j}}:=\{(x',y')~|~  x' + (i-1)\cdot \eps (x+y) < x' \leq x' + i\cdot \eps (x+y),~ (j-1)\cdot \eps y< y' \leq j\cdot \eps y\}$$

$$C_{V_{i,j}}:=\{(x',y')~|~  (i-1)\cdot \eps x < x' \leq i\cdot \eps x,~ y + (j-1)\cdot \eps (x+y)< y' \leq y + j\cdot \eps (x+y)\}$$

The entire construction can be seen in \figref{grid_construction}.

\begin{figure}
    \centering%
    \includegraphics[width=\linewidth,page=3]%
    {figs/grid_construction} \figlab{grid_construction}
    \caption{The construction of the grid for the arbitrary axis
       parallel rectangle local spanner.}
\end{figure}

\begin{claim}
    For every rectangle $r\in \LL$ and a pair $(A,B)$ of the SSPD
    s.t. $r_{1-\eps}\cap A \neq \emptyset$ and
    $r_{1-\eps}\cap B \neq \emptyset$, there are two points
    $a\in A, b\in B$ connected by an edge.
\end{claim}

\begin{proof}
    Let $A'=A\cap r_{1-\eps}, B'=B \cap r_{1-\eps}$, and let
    $p= \underset{p'}{argmax}\{||p'||_{\infty}~:~ p'\in A\cup B\}$,
    and assume w.l.o.g that $p\in A'$ and prove that there exist a
    point $q\in B'$ connected to $p$ by an edge.
    
    We take a point $q'\in B'$. Due to the choice of $p$ we have that
    one of the coordinates of $q'$ has a smaller absolute value than
    the same respective coordinate of $p$, and assume w.l.o.g that it
    is the $x$-coordinate. Now, since $\bigcup C_{i,j} \bigcup V_i$
    cover the entire part of $Q^+$ with an absolute $x$ value lower
    that that of $p$, we have that either there is an edge $\{p,q\}$
    in the graph, or there is another point $q$ in the same cell as
    $q'$. Regardless, since the cells are of width $\eps\cdot p.x$ and
    height $\eps\cdot p.y$ ,and $r$ is of width at least $p.x$ and
    height at least $p.y$, we get that the entire cell is inside $r$,
    and therefore there exists an edge as described in the claim.
    
\end{proof}


\subsection{Bounded aspect ratio triangles}

The aspect ratio of a triangle is defined as the length of its longest
edge divided by its height as it is measured from that edge. Let $\LL$
be the set of all triangles with aspect ratio at most $\alpha$ for
some $1 < \alpha$. We define a set of slopes, and for each subset of 3
slopes we run the convex region algorithm with $\LL$ as homothets of a
triangle with edges of the 3 chosen slopes. As long as the fixed
angular interval is smaller than
$\eps' = \arctan\left(\frac{\eps/2}{\alpha(1-\eps/2)}\right)$ (see
\figref{triangle_with_shadow}).

This construction creates $\frac{1}{\eps'}$ different convex local
spanners, and so we get a $(1+\eps)$-local spanner for triangles with
bounded aspect ratio in
$O\left(\frac{1}{\eps'^3\eps^3} n\log n\right)$.


\begin{figure}
    \centering
    \includegraphics[width=0.6\linewidth]{figs/triangle_shadow}
    \figlab{triangle_with_shadow}
\end{figure}


\bibliographystyle{alpha} 
%\bibliography{shortcuts,geometry}
\bibliography{ft_spanner}

\end{document}
